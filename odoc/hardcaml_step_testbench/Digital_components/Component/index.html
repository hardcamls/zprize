<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Component (hardcaml_step_testbench.Digital_components.Component)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">hardcaml_step_testbench</a> &#x00BB; <a href="../index.html">Digital_components</a> &#x00BB; Component</nav><header class="odoc-preamble"><h1>Module <code><span>Digital_components.Component</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#component-combinators">Component combinators</a></li><li><a href="#combinational-components">Combinational components</a></li><li><a href="#sequential-components">Sequential components</a></li></ul></nav><div class="odoc-content"><div class="odoc-include"><div class="odoc-spec"><div class="spec module-type" id="module-type-S" class="anchored"><a href="#module-type-S" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t_" class="anchored"><a href="#type-t_" class="anchor"></a><code><span><span class="keyword">type</span> <span>('i, 'o) t_</span></span></code></div><div class="spec-doc"><p><code>t</code> is mostly abstract, but we expose is as a constructor so that the type checker knows that <code>t</code> is injective.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('i, 'o) t</span></span><span> = </span></code><table><tr id="type-t.T" class="anchored"><td class="def variant constructor"><a href="#type-t.T" class="anchor"></a><code><span>| </span><span><span class="constructor">T</span> <span class="keyword">of</span> <span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t_">t_</a></span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_t" class="anchored"><a href="#val-sexp_of_t" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_t : 
  <span><span>( <span><span class="type-var">'i</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'o</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t_module" class="anchored"><a href="#type-t_module" class="anchor"></a><code><span><span class="keyword">type</span> <span>('i, 'o) t_module</span></span><span> =
  <span>(<span class="keyword">module</span> <a href="module-type-S/index.html">S</a>
  <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/Input/index.html#type-t">Input.t</a> = <span class="type-var">'i</span>
   <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-S/Output/index.html#type-t">Output.t</a> = <span class="type-var">'o</span>)</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_input" class="anchored"><a href="#val-sexp_of_input" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_input : <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'i</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Digital_components__</span>.Import.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_output" class="anchored"><a href="#val-sexp_of_output" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_output : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'o</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Digital_components__</span>.Import.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-input_module" class="anchored"><a href="#val-input_module" class="anchor"></a><code><span><span class="keyword">val</span> input_module : <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'i</span> <a href="../Data/index.html#type-t">Data.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-output_module" class="anchored"><a href="#val-output_module" class="anchor"></a><code><span><span class="keyword">val</span> output_module : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'o</span> <a href="../Data/index.html#type-t">Data.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t_module">t_module</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-output" class="anchored"><a href="#val-output" class="anchor"></a><code><span><span class="keyword">val</span> output : <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'i</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'o</span></span></code></div><div class="spec-doc"><p><code>output</code> returns the output based on an input and its current state, but does not update the state. A component is called &quot;combinational&quot; if <code>output t i</code> ignores <code>t</code>. A component is called &quot;sequential&quot; if <code>output t i</code> uses <code>t</code>. A sequential component is called a &quot;moore machine&quot; if it ignores <code>i</code> and a &quot;mealy machine&quot; if it uses <code>i</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-update_state" class="anchored"><a href="#val-update_state" class="anchor"></a><code><span><span class="keyword">val</span> update_state : <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'i</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Digital_components__Import</span>.Unit.t</span></code></div><div class="spec-doc"><p><code>update_state</code> updates <code>t</code>'s state based on an input and its current state</p></div></div><div class="odoc-spec"><div class="spec value" id="val-run_with_inputs" class="anchored"><a href="#val-run_with_inputs" class="anchor"></a><code><span><span class="keyword">val</span> run_with_inputs : 
  <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'i</span> <span class="xref-unresolved">Digital_components__Import</span>.List.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'i</span> * <span class="type-var">'o</span>)</span> <span class="xref-unresolved">Digital_components__Import</span>.List.t</span></span></code></div><div class="spec-doc"><p><code>run_with_inputs t is</code> runs <code>length is</code> steps with <code>t</code>, on each step calling <code>update_state</code> and then <code>output</code>, pairing the input of that step with the output.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Next_input" class="anchored"><a href="#module-Next_input" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Next_input/index.html">Next_input</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-run_until_finished" class="anchored"><a href="#val-run_until_finished" class="anchor"></a><code><span><span class="keyword">val</span> run_until_finished : 
  <span>?show_steps:<span class="xref-unresolved">Digital_components__Import</span>.Bool.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>first_input:<span class="type-var">'i</span> <span class="arrow">&#45;&gt;</span></span>
  <span>next_input:<span>( <span><span class="type-var">'o</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'i</span> <a href="Next_input/index.html#type-t">Next_input.t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Digital_components__Import</span>.Unit.t</span></code></div></div><h3 id="component-combinators"><a href="#component-combinators" class="anchor"></a>Component combinators</h3><div class="odoc-spec"><div class="spec value" id="val-sequence" class="anchored"><a href="#val-sequence" class="anchor"></a><code><span><span class="keyword">val</span> sequence : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'b</span>, <span class="type-var">'c</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'a</span>, <span class="type-var">'c</span> )</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map_input" class="anchored"><a href="#val-map_input" class="anchor"></a><code><span><span class="keyword">val</span> map_input : 
  <span><span><span>( <span class="type-var">'i2</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'i1</span> <a href="../Data/index.html#type-t">Data.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'i1</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'i2</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'i1</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map_output" class="anchored"><a href="#val-map_output" class="anchor"></a><code><span><span class="keyword">val</span> map_output : 
  <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">'o1</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'o2</span> <a href="../Data/index.html#type-t">Data.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>( <span><span class="type-var">'o1</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'o2</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'i</span>, <span class="type-var">'o2</span> )</span> <a href="#type-t">t</a></span></span></code></div></div><h3 id="combinational-components"><a href="#combinational-components" class="anchor"></a>Combinational components</h3><div class="odoc-spec"><div class="spec module" id="module-Combinational" class="anchored"><a href="#module-Combinational" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Combinational/index.html">Combinational</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create_combinational" class="anchored"><a href="#val-create_combinational" class="anchor"></a><code><span><span class="keyword">val</span> create_combinational : <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="Combinational/index.html#type-t">Combinational.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-and_" class="anchored"><a href="#val-and_" class="anchor"></a><code><span><span class="keyword">val</span> and_ : 
  <span><span>( <span class="xref-unresolved">Digital_components__Import</span>.Bool.t * <span class="xref-unresolved">Digital_components__Import</span>.Bool.t,
    <span class="xref-unresolved">Digital_components__Import</span>.Bool.t )</span>
    <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-or_" class="anchored"><a href="#val-or_" class="anchor"></a><code><span><span class="keyword">val</span> or_ : 
  <span><span>( <span class="xref-unresolved">Digital_components__Import</span>.Bool.t * <span class="xref-unresolved">Digital_components__Import</span>.Bool.t,
    <span class="xref-unresolved">Digital_components__Import</span>.Bool.t )</span>
    <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-not_" class="anchored"><a href="#val-not_" class="anchor"></a><code><span><span class="keyword">val</span> not_ : 
  <span><span>( <span class="xref-unresolved">Digital_components__Import</span>.Bool.t, <span class="xref-unresolved">Digital_components__Import</span>.Bool.t )</span> <a href="#type-t">t</a></span></span></code></div></div><h3 id="sequential-components"><a href="#sequential-components" class="anchor"></a>Sequential components</h3><div class="odoc-spec"><div class="spec value" id="val-flip_flop" class="anchored"><a href="#val-flip_flop" class="anchor"></a><code><span><span class="keyword">val</span> flip_flop : 
  <span><span class="xref-unresolved">Digital_components__Import</span>.Unit.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="xref-unresolved">Digital_components__Import</span>.Bool.t, <span class="xref-unresolved">Digital_components__Import</span>.Bool.t )</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Flip_flop_with_load_enable" class="anchored"><a href="#module-Flip_flop_with_load_enable" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Flip_flop_with_load_enable/index.html">Flip_flop_with_load_enable</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Flip_flop_with_load_enable_and_reset" class="anchored"><a href="#module-Flip_flop_with_load_enable_and_reset" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Flip_flop_with_load_enable_and_reset/index.html">Flip_flop_with_load_enable_and_reset</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></div></body></html>