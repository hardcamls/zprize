<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mul (hardcaml_circuits.Hardcaml_circuits.Mul)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">hardcaml_circuits</a> &#x00BB; <a href="../index.html">Hardcaml_circuits</a> &#x00BB; Mul</nav><header class="odoc-preamble"><h1>Module <code><span>Hardcaml_circuits.Mul</span></code></h1><p>Wallace/Dadda tree multipliers.</p><p>The Wallace/Dadda tree has three steps:</p><p>1. Multiply (that is - AND) each bit of one of the arguments, by each bit of the other, yielding n^2 results. Depending on position of the multiplied bits, the wires carry different weights, for example wire of bit carrying result of a2b3 is 32.</p><p>2. Reduce the number of partial products to two by layers of full and half adders.</p><p>3. Group the wires in two numbers, and add them with a conventional adder.</p><p>They differ in step 2 in how the results are combined.</p></header><nav class="odoc-toc"><ul><li><a href="#wallace">wallace</a></li><li><a href="#dadda">dadda</a></li></ul></nav><div class="odoc-content"><h4 id="wallace"><a href="#wallace" class="anchor"></a>wallace</h4><ul><li>Take any three wires with the same weights and input them into a full adder. The result will be an output wire of the same weight and an output wire with a higher weight for each three input wires.</li><li>If there are two wires of the same weight left, input them into a half adder.</li><li>If there is just one wire left, connect it to the next layer.</li></ul><h4 id="dadda"><a href="#dadda" class="anchor"></a>dadda</h4><ul><li>Take any three wires with the same weights and input them into a full adder. The result will be an output wire of the same weight and an output wire with a higher weight for each three input wires.</li><li>If there are 2 wires of the same weight left, and the current number of output wires with that weight is equal to 2 (modulo 3), input them into a half adder. Otherwise, pass them through to the next layer.</li><li>If there is just 1 wire left, connect it to the next layer.</li></ul><p>However, when a layer carries at most 3 input wires for any weight, that layer will be the last one. In this case, the Dadda tree will use half adder more aggressively (but still not as much as in a Wallace multiplier), to ensure that there are only two outputs for any weight. Then, the second rule above changes as follows:</p><ul><li>If there are 2 wires of the same weight left, and the current number of output wires with that weight is equal to 1 or 2 (modulo 3), input them into a half adder. Otherwise, pass them through to the next layer.</li></ul><div class="odoc-include"><div class="odoc-spec"><div class="spec module-type" id="module-type-Gen" class="anchored"><a href="#module-type-Gen" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Gen/index.html">Gen</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Config" class="anchored"><a href="#module-Config" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Config/index.html">Config</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create_gen" class="anchored"><a href="#val-create_gen" class="anchor"></a><code><span><span class="keyword">val</span> create_gen : 
  <span>config:<a href="Config/index.html#type-t">Config.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="module-type-Gen/index.html">Gen</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Gen/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span>config:<a href="Config/index.html#type-t">Config.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../../../hardcaml/Hardcaml/Comb/module-type-S/index.html">Hardcaml.Comb.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../hardcaml/Hardcaml/Comb/module-type-S/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div></div></div></body></html>