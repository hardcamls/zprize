<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Adder_subtractor_pipe (zprize.Field_ops_lib.Adder_subtractor_pipe)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">zprize</a> &#x00BB; <a href="../index.html">Field_ops_lib</a> &#x00BB; Adder_subtractor_pipe</nav><header class="odoc-preamble"><h1>Module <code><span>Field_ops_lib.Adder_subtractor_pipe</span></code></h1><p>Multistage fully-pipelined ripple-carry-adder (or subtractor).</p><p>This module computs <code>a OP b OP c OP d...</code> in fully-piipelined using the ripple-carry-add algorithm. Each of the OP are either (+) or (-) (they don't have to be the same)</p><p>The fully-pipelined adder breaks the adder down to <code>stages</code> chunks, each to be added separately every clock cycles. Registers are placed at the inputs and outputs to align them to the same clock cycles.</p><p>If any but the first of the operands are constants, the module will generate a specialized module that uses the constant directly throughout the adder/subtractor, rather than pipelining it.</p></header><nav class="odoc-toc"><ul><li><a href="#functions-without-carry/borrow">Functions without Carry/Borrow</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-latency" class="anchored"><a href="#val-latency" class="anchor"></a><code><span><span class="keyword">val</span> latency : <span>stages:int <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Term_and_op" class="anchored"><a href="#module-Term_and_op" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Term_and_op/index.html">Term_and_op</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-O" class="anchored"><a href="#module-O" class="anchor"></a><code><span><span class="keyword">module</span> <a href="O/index.html">O</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Output of the adder/subtractor with carry/borrow bits.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mixed" class="anchored"><a href="#val-mixed" class="anchor"></a><code><span><span class="keyword">val</span> mixed : 
  <span>?name:string <span class="arrow">&#45;&gt;</span></span>
  <span>?instance:string <span class="arrow">&#45;&gt;</span></span>
  <span>stages:int <span class="arrow">&#45;&gt;</span></span>
  <span>scope:<a href="../../../hardcaml/Hardcaml/Scope/index.html#type-t">Hardcaml.Scope.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>enable:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>clock:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>init:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <a href="Term_and_op/index.html#type-t">Term_and_op.t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <a href="O/index.html#type-t">O.t</a></span></span></code></div><div class="spec-doc"><p>Instantiate a hierarchical pipelined adder/subtractor chain.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add" class="anchored"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : 
  <span>?name:string <span class="arrow">&#45;&gt;</span></span>
  <span>?instance:string <span class="arrow">&#45;&gt;</span></span>
  <span>stages:int <span class="arrow">&#45;&gt;</span></span>
  <span>scope:<a href="../../../hardcaml/Hardcaml/Scope/index.html#type-t">Hardcaml.Scope.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>enable:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>clock:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <a href="O/index.html#type-t">O.t</a></span></span></code></div><div class="spec-doc"><p>Similar to <code>mixed</code>, but only with additions.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sub" class="anchored"><a href="#val-sub" class="anchor"></a><code><span><span class="keyword">val</span> sub : 
  <span>?name:string <span class="arrow">&#45;&gt;</span></span>
  <span>?instance:string <span class="arrow">&#45;&gt;</span></span>
  <span>stages:int <span class="arrow">&#45;&gt;</span></span>
  <span>scope:<a href="../../../hardcaml/Hardcaml/Scope/index.html#type-t">Hardcaml.Scope.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>enable:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>clock:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <a href="O/index.html#type-t">O.t</a></span></span></code></div><div class="spec-doc"><p>Similar to <code>mixed</code>, but only with subtractions.</p></div></div><h2 id="functions-without-carry/borrow"><a href="#functions-without-carry/borrow" class="anchor"></a>Functions without Carry/Borrow</h2><div class="odoc-spec"><div class="spec value" id="val-mixed_no_carry" class="anchored"><a href="#val-mixed_no_carry" class="anchor"></a><code><span><span class="keyword">val</span> mixed_no_carry : 
  <span>?name:string <span class="arrow">&#45;&gt;</span></span>
  <span>?instance:string <span class="arrow">&#45;&gt;</span></span>
  <span>stages:int <span class="arrow">&#45;&gt;</span></span>
  <span>scope:<a href="../../../hardcaml/Hardcaml/Scope/index.html#type-t">Hardcaml.Scope.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>enable:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>clock:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>init:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <a href="Term_and_op/index.html#type-t">Term_and_op.t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a></span></code></div><div class="spec-doc"><p>These are similar to the <code>mixed</code>, <code>add</code> and <code>sub</code> functions, but without the carry/borrow bits.</p><p>Note that <code>stages = 0</code> or <code>stages = 1</code> is allowed. It will result in a non-hierarchical combinational adder and a single-stage adder respectively. For adding values of <code>stages</code>, this module will instantiate a a hierarchical module. The rationale for this is we empirically observed better synthesis results when we don't instantiate it hierarchically.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_no_carry" class="anchored"><a href="#val-add_no_carry" class="anchor"></a><code><span><span class="keyword">val</span> add_no_carry : 
  <span>?name:string <span class="arrow">&#45;&gt;</span></span>
  <span>?instance:string <span class="arrow">&#45;&gt;</span></span>
  <span>stages:int <span class="arrow">&#45;&gt;</span></span>
  <span>scope:<a href="../../../hardcaml/Hardcaml/Scope/index.html#type-t">Hardcaml.Scope.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>enable:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>clock:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sub_no_carry" class="anchored"><a href="#val-sub_no_carry" class="anchor"></a><code><span><span class="keyword">val</span> sub_no_carry : 
  <span>?name:string <span class="arrow">&#45;&gt;</span></span>
  <span>?instance:string <span class="arrow">&#45;&gt;</span></span>
  <span>stages:int <span class="arrow">&#45;&gt;</span></span>
  <span>scope:<a href="../../../hardcaml/Hardcaml/Scope/index.html#type-t">Hardcaml.Scope.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>enable:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>clock:<a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../hardcaml/Hardcaml/Signal/index.html#type-t">Hardcaml.Signal.t</a></span></code></div></div></div></body></html>