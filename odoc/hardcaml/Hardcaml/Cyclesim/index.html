<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Cyclesim (hardcaml.Hardcaml.Cyclesim)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">hardcaml</a> &#x00BB; <a href="../index.html">Hardcaml</a> &#x00BB; Cyclesim</nav><header class="odoc-preamble"><h1>Module <code><span>Hardcaml.Cyclesim</span></code></h1><p>Cycle accurate simulator</p></header><div class="odoc-content"><div class="odoc-include"><div class="odoc-spec"><div class="spec module" id="module-Port_list" class="anchored"><a href="#module-Port_list" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Port_list/index.html">Port_list</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Digest" class="anchored"><a href="#module-Digest" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Digest/index.html">Digest</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Config" class="anchored"><a href="#module-Config" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Config/index.html">Config</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('i, 'o) t</span></span></code></div><div class="spec-doc"><p>base type of the cycle based simulators</p></div></div><div class="odoc-spec"><div class="spec type" id="type-t_port_list" class="anchored"><a href="#type-t_port_list" class="anchor"></a><code><span><span class="keyword">type</span> t_port_list</span><span> = <span><span>( <a href="Port_list/index.html#type-t">Port_list.t</a>, <a href="Port_list/index.html#type-t">Port_list.t</a> )</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-circuit" class="anchored"><a href="#val-circuit" class="anchor"></a><code><span><span class="keyword">val</span> circuit : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Circuit/index.html#type-t">Circuit.t</a> <span class="xref-unresolved">Base</span>.option</span></span></code></div><div class="spec-doc"><p>returns the circuit used to compile the simulation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cycle" class="anchored"><a href="#val-cycle" class="anchor"></a><code><span><span class="keyword">val</span> cycle : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>advance by 1 clock cycle (check-&gt;comb-&gt;seq-&gt;comb)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cycle_check" class="anchored"><a href="#val-cycle_check" class="anchor"></a><code><span><span class="keyword">val</span> cycle_check : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>check inputs are valid before a simulation cycle</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cycle_before_clock_edge" class="anchored"><a href="#val-cycle_before_clock_edge" class="anchor"></a><code><span><span class="keyword">val</span> cycle_before_clock_edge : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>update combinatorial logic before clock edge and relative to new inputs.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cycle_at_clock_edge" class="anchored"><a href="#val-cycle_at_clock_edge" class="anchor"></a><code><span><span class="keyword">val</span> cycle_at_clock_edge : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>update sequential logic - registers and memories.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cycle_after_clock_edge" class="anchored"><a href="#val-cycle_after_clock_edge" class="anchor"></a><code><span><span class="keyword">val</span> cycle_after_clock_edge : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>update combinatorial logic after clock edge</p></div></div><div class="odoc-spec"><div class="spec value" id="val-reset" class="anchored"><a href="#val-reset" class="anchor"></a><code><span><span class="keyword">val</span> reset : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>reset simulator</p></div></div><div class="odoc-spec"><div class="spec value" id="val-in_port" class="anchored"><a href="#val-in_port" class="anchor"></a><code><span><span class="keyword">val</span> in_port : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Bits/index.html#type-t">Bits.t</a> <span class="xref-unresolved">Base</span>.ref</span></span></code></div><div class="spec-doc"><p>get input port given a name</p></div></div><div class="odoc-spec"><div class="spec value" id="val-internal_port" class="anchored"><a href="#val-internal_port" class="anchor"></a><code><span><span class="keyword">val</span> internal_port : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Bits/index.html#type-t">Bits.t</a> <span class="xref-unresolved">Base</span>.ref</span></span></code></div><div class="spec-doc"><p>get a traced internal port given a name.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-out_port" class="anchored"><a href="#val-out_port" class="anchor"></a><code><span><span class="keyword">val</span> out_port : 
  <span>?clock_edge:<a href="../Side/index.html#type-t">Side.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Bits/index.html#type-t">Bits.t</a> <span class="xref-unresolved">Base</span>.ref</span></span></code></div><div class="spec-doc"><p>Get output port given a name. If <code>clock_edge</code> is <code>Before</code> the outputs are computed prior to the clock edge - <code>After</code> means the outputs are computed after the clock edge.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-inputs" class="anchored"><a href="#val-inputs" class="anchor"></a><code><span><span class="keyword">val</span> inputs : <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'i</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-outputs" class="anchored"><a href="#val-outputs" class="anchor"></a><code><span><span class="keyword">val</span> outputs : <span>?clock_edge:<a href="../Side/index.html#type-t">Side.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">_</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'o</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-in_ports" class="anchored"><a href="#val-in_ports" class="anchor"></a><code><span><span class="keyword">val</span> in_ports : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="Port_list/index.html#type-t">Port_list.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-out_ports" class="anchored"><a href="#val-out_ports" class="anchor"></a><code><span><span class="keyword">val</span> out_ports : <span>?clock_edge:<a href="../Side/index.html#type-t">Side.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="Port_list/index.html#type-t">Port_list.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-internal_ports" class="anchored"><a href="#val-internal_ports" class="anchor"></a><code><span><span class="keyword">val</span> internal_ports : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="Port_list/index.html#type-t">Port_list.t</a></span></code></div><div class="spec-doc"><p>get list of internal nodes</p></div></div><div class="odoc-spec"><div class="spec value" id="val-digest" class="anchored"><a href="#val-digest" class="anchor"></a><code><span><span class="keyword">val</span> digest : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="Digest/index.html#type-t">Digest.t</a> <span class="xref-unresolved">Base</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lookup_reg" class="anchored"><a href="#val-lookup_reg" class="anchor"></a><code><span><span class="keyword">val</span> lookup_reg : <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Bits/Mutable/index.html#type-t">Bits.Mutable.t</a> <span class="xref-unresolved">Base</span>.option</span></span></code></div><div class="spec-doc"><p>Peek at internal registers, return Some _ if it's present. Note that the node must marked as traced in <code>Cyclesim.Config.t</code> when creating simulations for this to return (Some _). Writing to the <code>Bits.Mutable.t</code> will change the simulation internal node's value and affect the results of simulation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lookup_mem" class="anchored"><a href="#val-lookup_mem" class="anchor"></a><code><span><span class="keyword">val</span> lookup_mem : 
  <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Bits/Mutable/index.html#type-t">Bits.Mutable.t</a> <span class="xref-unresolved">Base</span>.array</span> <span class="xref-unresolved">Base</span>.option</span></span></code></div><div class="spec-doc"><p>Similar to <code>lookup_data</code>, but for memories. This is very useful for initializing memory contents without having to simulate the entire circuit.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Violated_or_not" class="anchored"><a href="#module-Violated_or_not" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Violated_or_not/index.html">Violated_or_not</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-results_of_assertions" class="anchored"><a href="#val-results_of_assertions" class="anchor"></a><code><span><span class="keyword">val</span> results_of_assertions : 
  <span><span><span>( <span class="type-var">_</span>, <span class="type-var">_</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="Violated_or_not/index.html#type-t">Violated_or_not.t</a> <span class="xref-unresolved">Base</span>.Map.M(<span class="xref-unresolved">Base</span>.String).t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>?config:<a href="Config/index.html#type-t">Config.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Circuit/index.html#type-t">Circuit.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t_port_list">t_port_list</a></span></code></div><div class="spec-doc"><p>construct a simulator from a circuit</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Combine_error" class="anchored"><a href="#module-Combine_error" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Combine_error/index.html">Combine_error</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-combine" class="anchored"><a href="#val-combine" class="anchor"></a><code><span><span class="keyword">val</span> combine : 
  <span>?port_sets_may_differ:<span class="xref-unresolved">Base</span>.bool <span class="arrow">&#45;&gt;</span></span>
  <span>?on_error:<span>( <span><a href="Combine_error/index.html#type-t">Combine_error.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'i</span>, <span class="type-var">'o</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Combine 2 simulators. The inputs are set on the 1st simulator and copied to the 2nd. Outputs are checked and <code>on_error</code> is called if a difference is found. By default, <code>on_error</code> raises.</p><p>The simulators should have the same input and output port sets, unless <code>port_sets_may_differ</code> is <code>true</code>, in which case only ports which exist on both simulators are checked.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-With_interface" class="anchored"><a href="#module-With_interface" class="anchor"></a><code><span><span class="keyword">module</span> <a href="With_interface/index.html">With_interface</a></span><span> (<a href="With_interface/argument-1-I/index.html">I</a> : <a href="../Interface/module-type-S/index.html">Interface.S</a>) (<a href="With_interface/argument-2-O/index.html">O</a> : <a href="../Interface/module-type-S/index.html">Interface.S</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Private" class="anchored"><a href="#module-Private" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Private/index.html">Private</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></div></body></html>