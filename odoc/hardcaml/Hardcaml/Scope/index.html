<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Scope (hardcaml.Hardcaml.Scope)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">hardcaml</a> &#x00BB; <a href="../index.html">Hardcaml</a> &#x00BB; Scope</nav><header class="odoc-preamble"><h1>Module <code><span>Hardcaml.Scope</span></code></h1><p>Scopes control the process of hierarchical circuit generation.</p><p>They track a circuit database of instantiated modules, and a scheme for managing the naming of signals within the design.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Path" class="anchored"><a href="#module-Path" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Path/index.html">Path</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Naming_scheme" class="anchored"><a href="#module-Naming_scheme" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Naming_scheme/index.html">Naming_scheme</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Control of name generation in a hierarchy of modules. The position of a module within a hierarchy is determined by a path which leads back to the (single) top most parent module. Signal names may be pre-pended with some representation of that path.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sexp_of_t" class="anchored"><a href="#val-sexp_of_t" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_t : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span>?flatten_design:<span class="xref-unresolved">Base</span>.bool <span class="arrow">&#45;&gt;</span></span>
  <span>?auto_label_hierarchical_ports:<span class="xref-unresolved">Base</span>.bool <span class="arrow">&#45;&gt;</span></span>
  <span>?trace_properties:<span class="xref-unresolved">Base</span>.bool <span class="arrow">&#45;&gt;</span></span>
  <span>?naming_scheme:<a href="Naming_scheme/index.html#type-t">Naming_scheme.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?name:<span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Base</span>.unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>create ?flatten_design ?naming_scheme ?name ()</code> creates a new scope. If <code>flatten_design</code> is <code>true</code>, then all module instantions are inlined. Names for wires are determined by <code>naming_scheme</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sub_scope" class="anchored"><a href="#val-sub_scope" class="anchor"></a><code><span><span class="keyword">val</span> sub_scope : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>sub_scope t label</code> returns a new scope with (mangled) <code>label</code> appended to its hierarchical path</p></div></div><div class="odoc-spec"><div class="spec value" id="val-path" class="anchored"><a href="#val-path" class="anchor"></a><code><span><span class="keyword">val</span> path : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Path/index.html#type-t">Path.t</a></span></code></div><div class="spec-doc"><p><code>path t</code> returns the <a href="Path/index.html#type-t"><code>Path.t</code></a> associated with <code>t</code>. This will determine the prefix used when naming modules that are associated with this scope.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-circuit_database" class="anchored"><a href="#val-circuit_database" class="anchor"></a><code><span><span class="keyword">val</span> circuit_database : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Circuit_database/index.html#type-t">Circuit_database.t</a></span></code></div><div class="spec-doc"><p><code>circuit_database t</code> returns the circuit database associated with <code>t</code>. Note that circuit databases are shared among <a href="#val-sub_scope"><code>sub_scope</code></a>s.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-flatten_design" class="anchored"><a href="#val-flatten_design" class="anchor"></a><code><span><span class="keyword">val</span> flatten_design : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.bool</span></code></div><div class="spec-doc"><p><code>flatten_design t</code> returns true when HardCaml will inline all module instantiations.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-auto_label_hierarchical_ports" class="anchored"><a href="#val-auto_label_hierarchical_ports" class="anchor"></a><code><span><span class="keyword">val</span> auto_label_hierarchical_ports : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.bool</span></code></div><div class="spec-doc"><p><code>auto_label_hierarical_ports t</code> returns true when Hardcaml will add names to input and outputs ports of each hierarchical module.</p><p>This is useful with the interactive waveform viewer. The port names are prefixed with <code>i$</code> and <code>o$</code> and will be arranged in a tree view automactically.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-trace_properties" class="anchored"><a href="#val-trace_properties" class="anchor"></a><code><span><span class="keyword">val</span> trace_properties : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.bool</span></code></div><div class="spec-doc"><p><code>trace_properties t</code> returns true when tracing of ltl properties is enabled</p></div></div><div class="odoc-spec"><div class="spec value" id="val-naming_scheme" class="anchored"><a href="#val-naming_scheme" class="anchor"></a><code><span><span class="keyword">val</span> naming_scheme : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Naming_scheme/index.html#type-t">Naming_scheme.t</a></span></code></div><div class="spec-doc"><p><code>naming_scheme t</code> returns the <code>Naming</code>.t that <code>t</code> was constructed with.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-name" class="anchored"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span>?sep:<span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.string</span></code></div><div class="spec-doc"><p><code>name ?sep t signal string</code> creates a heirarchical name based on the path of <code>t</code> and <code>string</code>. <code>sep</code>, when provided, determines the separator for path components in the heirarchical name (default is <code>$</code>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-instance" class="anchored"><a href="#val-instance" class="anchor"></a><code><span><span class="keyword">val</span> instance : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="xref-unresolved">Base</span>.option</span></span></code></div><div class="spec-doc"><p>Return the current (mangled) instance name. The top level module has no instance name, so returns <code>None</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-naming" class="anchored"><a href="#val-naming" class="anchor"></a><code><span><span class="keyword">val</span> naming : <span>?sep:<span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Signal/index.html#type-t">Signal.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <a href="../Signal/index.html#type-t">Signal.t</a></span></code></div><div class="spec-doc"><p>Creates a hierarchical name, built with <code>name</code>, and applies it to the signal.</p><p>This is typically used as a partial application to construct a new signal naming operator, .e.g:</p><pre><code>let (--) = naming scope in
let named_signal = some_signal -- &quot;data&quot; in</code></pre></div></div><div class="odoc-spec"><div class="spec value" id="val-make_ltl_ap" class="anchored"><a href="#val-make_ltl_ap" class="anchor"></a><code><span><span class="keyword">val</span> make_ltl_ap : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Signal/index.html#type-t">Signal.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Property/LTL/index.html#type-path">Property.LTL.path</a></span></code></div><div class="spec-doc"><p>Creates an atomic proposition for use in an LTL formula, naming the AP with the scope's name and the provided string argument</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_assertion" class="anchored"><a href="#val-add_assertion" class="anchor"></a><code><span><span class="keyword">val</span> add_assertion : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Signal/index.html#type-t">Signal.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-add_ltl_property" class="anchored"><a href="#val-add_ltl_property" class="anchor"></a><code><span><span class="keyword">val</span> add_ltl_property : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Property/LTL/index.html#type-path">Property.LTL.path</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-assertion_manager" class="anchored"><a href="#val-assertion_manager" class="anchor"></a><code><span><span class="keyword">val</span> assertion_manager : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Assertion_manager/index.html#type-t">Assertion_manager.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-property_manager" class="anchored"><a href="#val-property_manager" class="anchor"></a><code><span><span class="keyword">val</span> property_manager : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Property_manager/index.html#type-t">Property_manager.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-assert_signal_in_always" class="anchored"><a href="#val-assert_signal_in_always" class="anchor"></a><code><span><span class="keyword">val</span> assert_signal_in_always : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Signal/index.html#type-t">Signal.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Always/index.html#type-t">Always.t</a></span></code></div><div class="spec-doc"><p>add an assertion to the scope's assertion manager</p></div></div></div></body></html>